(()=>{var e={};e.id=8427,e.ids=[8427],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},5623:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),s(3624),s(134),s(5866);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),l=s(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["admin",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3624)),"C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\admin\\dashboard\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,134)),"C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\admin\\dashboard\\page.tsx"],m="/admin/dashboard/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/dashboard/page",pathname:"/admin/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7999:(e,t,s)=>{Promise.resolve().then(s.bind(s,5426))},5426:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(326),a=s(7577),i=s(5047),n=s(434);function l(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)({totalUsers:0,verifiedUsers:0,unverifiedUsers:0}),[d,c]=(0,a.useState)(!0),[o,m]=(0,a.useState)("users"),[x,h]=(0,a.useState)(null),u=(0,i.useRouter)(),p=async()=>{try{let[e,s]=await Promise.all([fetch("/api/admin/users"),fetch("/api/admin/stats")]);if(401===e.status||401===s.status){console.log("Admin not authenticated, redirecting to login..."),u.push("/admin");return}if(e.ok){let s=await e.json();t(s.users||[])}else console.error("Failed to fetch users:",e.status),t([]);if(s.ok){let e=await s.json();l(e)}else console.error("Failed to fetch stats:",s.status),l({totalUsers:0,verifiedUsers:0,unverifiedUsers:0})}catch(e){console.error("Error fetching data:",e),t([]),l({totalUsers:0,verifiedUsers:0,unverifiedUsers:0})}finally{c(!1)}},g=async()=>{await fetch("/api/admin/logout",{method:"POST"}),u.push("/admin")},b=async(e,s)=>{if(confirm(`Bist du sicher, dass du den Benutzer "${s}" l\xf6schen m\xf6chtest? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden.`)){h(e);try{let r=await fetch(`/api/admin/users/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(r.ok)t(t=>t.filter(t=>t.id!==e)),await p(),alert(`Benutzer "${s}" wurde erfolgreich gel\xf6scht.`);else{let e=await r.json();alert(e.error||"Fehler beim L\xf6schen des Users")}}catch(e){console.error("Error deleting user:",e),alert("Ein Fehler ist aufgetreten beim L\xf6schen des Users")}finally{h(null)}}},f=async(e,s,r)=>{try{(await fetch(`/api/admin/users/${e}/social-verification`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:s,verified:!r})})).ok?t(t=>t.map(t=>t.id===e?{...t,[`${s}Verified`]:!r,isVerified:"twitch"===s?!r:t.twitchVerified&&"instagram"===s?!r:t.instagramVerified&&"discord"===s?!r:t.discordVerified}:t)):alert("Fehler beim Aktualisieren der Verifikation")}catch(e){alert("Ein Fehler ist aufgetreten")}},y=async(e,s)=>{try{(await fetch(`/api/admin/users/${e}/tier`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:s})})).ok?t(t=>t.map(t=>t.id===e?{...t,tier:s}:t)):alert("Fehler beim Aktualisieren des Tiers")}catch(e){alert("Ein Fehler ist aufgetreten")}},j=async(e,t)=>{try{let s=await fetch(`/api/admin/users/${e}/team`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamName:t})});if(s.ok)await p();else{let e=await s.json();alert(e.error||"Fehler beim Aktualisieren der Team-Zuweisung")}}catch(e){alert("Ein Fehler ist aufgetreten")}},N=async e=>{try{let s=await fetch("/api/admin/toggle-streamer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(s.ok){let r=await s.json();t(t=>t.map(t=>t.id===e?{...t,isStreamer:r.isStreamer}:t))}else alert("Fehler beim Aktualisieren des Streamer Status")}catch(e){alert("Ein Fehler ist aufgetreten")}};return d?r.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:r.jsx("div",{className:"text-white text-xl",children:"Lade Admin Dashboard..."})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[r.jsx("header",{className:"bg-gray-800 border-b border-gray-700",children:r.jsx("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("nav",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-400",children:"\uD83D\uDD12 ADMIN PANEL"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:"text-gray-300",children:"Administrator"}),r.jsx("button",{onClick:g,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors",children:"Abmelden"})]})]})})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex space-x-1 mb-8",children:[r.jsx("button",{onClick:()=>m("overview"),className:`px-6 py-3 rounded-lg font-semibold transition-colors ${"overview"===o?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"\xdcbersicht"}),r.jsx("button",{onClick:()=>m("users"),className:`px-6 py-3 rounded-lg font-semibold transition-colors ${"users"===o?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"User Management"}),r.jsx(n.default,{href:"/admin/wheel",className:"px-6 py-3 rounded-lg font-semibold bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"\uD83C\uDFAF Gl\xfccksrad"}),r.jsx(n.default,{href:"/admin/bracket",className:"px-6 py-3 rounded-lg font-semibold bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"\uD83C\uDFC6 Tournament Bracket"})]}),"overview"===o&&(0,r.jsxs)("div",{className:"space-y-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white",children:"Dashboard \xdcbersicht"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[r.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Registrierte User"}),r.jsx("p",{className:"text-3xl font-bold text-blue-400",children:s.totalUsers})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[r.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Verifizierte User"}),r.jsx("p",{className:"text-3xl font-bold text-green-400",children:s.verifiedUsers})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[r.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Warten auf Verifikation"}),r.jsx("p",{className:"text-3xl font-bold text-yellow-400",children:s.unverifiedUsers})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[r.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Schnellzugriff"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)(n.default,{href:"/admin/wheel",className:"bg-purple-600 text-white p-4 rounded-lg hover:bg-purple-700 transition-colors text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:"\uD83C\uDFAF"}),r.jsx("div",{className:"font-semibold",children:"Gl\xfccksrad"}),r.jsx("div",{className:"text-sm opacity-80",children:"User zu Teams zuweisen"})]}),(0,r.jsxs)(n.default,{href:"/admin/bracket",className:"bg-blue-600 text-white p-4 rounded-lg hover:bg-blue-700 transition-colors text-center",children:[r.jsx("div",{className:"text-2xl mb-2",children:"\uD83C\uDFC6"}),r.jsx("div",{className:"font-semibold",children:"Tournament Bracket"}),r.jsx("div",{className:"text-sm opacity-80",children:"Matches verwalten"})]})]})]})]}),"users"===o&&(0,r.jsxs)("div",{className:"space-y-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white",children:"User Management"}),r.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left p-4 text-gray-300",children:"Username"}),r.jsx("th",{className:"text-left p-4 text-gray-300",children:"In-Game Name"}),r.jsx("th",{className:"text-left p-4 text-gray-300",children:"Rank"}),r.jsx("th",{className:"text-left p-4 text-gray-300",children:"Tier & Status"}),r.jsx("th",{className:"text-left p-4 text-gray-300",children:"Team"}),r.jsx("th",{className:"text-left p-4 text-gray-300",children:"Twitch"}),r.jsx("th",{className:"text-left p-4 text-gray-300",children:"Instagram"}),r.jsx("th",{className:"text-left p-4 text-gray-300",children:"Discord"}),r.jsx("th",{className:"text-left p-4 text-gray-300",children:"Status"}),r.jsx("th",{className:"text-left p-4 text-gray-300",children:"Aktionen"})]})}),r.jsx("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"border-t border-gray-700",children:[r.jsx("td",{className:"p-4 text-white",children:e.username}),r.jsx("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-300 text-sm",children:e.inGameName||"-"}),e.inGameName&&r.jsx("button",{onClick:()=>f(e.id,"inGameName",e.inGameNameVerified),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${e.inGameNameVerified?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:e.inGameNameVerified?"✅ Verifiziert":"⏳ Ausstehend"})]})}),r.jsx("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-300 text-sm",children:e.inGameRank||"-"}),e.inGameRank&&r.jsx("button",{onClick:()=>f(e.id,"inGameRank",e.inGameRankVerified),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${e.inGameRankVerified?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:e.inGameRankVerified?"✅ Verifiziert":"⏳ Ausstehend"})]})}),r.jsx("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${"tier1"===e.tier?"bg-blue-600 text-white":"tier2"===e.tier?"bg-green-600 text-white":"tier3"===e.tier?"bg-yellow-600 text-white":"bg-gray-600 text-gray-300"}`,children:e.tier?e.tier.toUpperCase():"KEIN TIER"}),e.isStreamer&&r.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-purple-600 text-white",children:"\uD83C\uDFA5 STREAMER"})]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsxs)("select",{value:e.tier||"",onChange:t=>y(e.id,t.target.value),className:"bg-gray-700 border border-gray-600 rounded text-xs text-white px-2 py-1 focus:outline-none focus:border-blue-500 flex-1",children:[r.jsx("option",{value:"",children:"Kein Tier"}),r.jsx("option",{value:"tier1",children:"Tier 1"}),r.jsx("option",{value:"tier2",children:"Tier 2"}),r.jsx("option",{value:"tier3",children:"Tier 3"})]}),r.jsx("button",{onClick:()=>N(e.id),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${e.isStreamer?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,title:e.isStreamer?"Streamer Status entfernen":"Als Streamer markieren",children:"\uD83C\uDFA5"})]})]})}),r.jsx("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-300 text-sm",children:e.teamMemberships&&e.teamMemberships.length>0?e.teamMemberships[0].team.name:"Kein Team"}),(0,r.jsxs)("select",{value:e.teamMemberships&&e.teamMemberships.length>0?e.teamMemberships[0].team.name:"",onChange:t=>j(e.id,t.target.value),className:"bg-gray-700 border border-gray-600 rounded text-xs text-white px-2 py-1 focus:outline-none focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Kein Team"}),r.jsx("option",{value:"Team Alpha",children:"Team Alpha"}),r.jsx("option",{value:"Team Beta",children:"Team Beta"}),r.jsx("option",{value:"Team Gamma",children:"Team Gamma"}),r.jsx("option",{value:"Team Delta",children:"Team Delta"}),r.jsx("option",{value:"Team Epsilon",children:"Team Epsilon"}),r.jsx("option",{value:"Team Zeta",children:"Team Zeta"}),r.jsx("option",{value:"Team Eta",children:"Team Eta"}),r.jsx("option",{value:"Team Theta",children:"Team Theta"})]})]})}),r.jsx("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-300 text-sm",children:e.twitchName||"-"}),e.twitchName&&r.jsx("button",{onClick:()=>f(e.id,"twitch",e.twitchVerified),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${e.twitchVerified?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:e.twitchVerified?"✅ Verifiziert":"⏳ Ausstehend"})]})}),r.jsx("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-300 text-sm",children:e.instagramName||"-"}),e.instagramName&&r.jsx("button",{onClick:()=>f(e.id,"instagram",e.instagramVerified),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${e.instagramVerified?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:e.instagramVerified?"✅ Verifiziert":"⏳ Ausstehend"})]})}),r.jsx("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-300 text-sm",children:e.discordName||"-"}),e.discordName&&r.jsx("button",{onClick:()=>f(e.id,"discord",e.discordVerified),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${e.discordVerified?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:e.discordVerified?"✅ Verifiziert":"⏳ Ausstehend"})]})}),r.jsx("td",{className:"p-4",children:(()=>{let t=e.twitchName||e.instagramName||e.discordName,s=e.inGameName||e.inGameRank,a=(!e.twitchName||e.twitchVerified)&&(!e.instagramName||e.instagramVerified)&&(!e.discordName||e.discordVerified),i=(!e.inGameName||e.inGameNameVerified)&&(!e.inGameRank||e.inGameRankVerified),n=e.twitchVerified||e.instagramVerified||e.discordVerified||e.inGameNameVerified||e.inGameRankVerified;return t||s?a&&i?r.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded text-sm",children:"Vollst\xe4ndig verifiziert"}):n?r.jsx("span",{className:"bg-yellow-600 text-white px-2 py-1 rounded text-sm",children:"Teilweise verifiziert"}):r.jsx("span",{className:"bg-red-600 text-white px-2 py-1 rounded text-sm",children:"Nicht verifiziert"}):r.jsx("span",{className:"bg-gray-600 text-white px-2 py-1 rounded text-sm",children:"Keine Infos"})})()}),r.jsx("td",{className:"p-4",children:r.jsx("div",{className:"flex space-x-2",children:r.jsx("button",{onClick:()=>b(e.id,e.username),disabled:x===e.id,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center space-x-1",children:x===e.id?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"..."})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{children:"\uD83D\uDDD1️"}),r.jsx("span",{children:"L\xf6schen"})]})})})})]},e.id))})]})})})]})]})]})}},3624:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\Users\hAiQ\Desktop\cup\src\app\admin\dashboard\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,7855,6881],()=>s(5623));module.exports=r})();