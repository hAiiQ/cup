(()=>{var e={};e.id=8427,e.ids=[8427],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},5623:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>c}),r(3624),r(134),r(5866);var s=r(3191),a=r(8716),i=r(7922),n=r.n(i),l=r(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let c=["",{children:["admin",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3624)),"C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\admin\\dashboard\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,134)),"C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\admin\\dashboard\\page.tsx"],x="/admin/dashboard/page",m={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/dashboard/page",pathname:"/admin/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7999:(e,t,r)=>{Promise.resolve().then(r.bind(r,5426))},5426:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(326),a=r(7577),i=r(5047),n=r(434);function l(){let[e,t]=(0,a.useState)([]),[r,l]=(0,a.useState)({totalUsers:0,verifiedUsers:0,unverifiedUsers:0}),[d,c]=(0,a.useState)(!0),[o,x]=(0,a.useState)("users"),[m,h]=(0,a.useState)(null),u=(0,i.useRouter)(),p=async()=>{try{let[e,r]=await Promise.all([fetch("/api/admin/users"),fetch("/api/admin/stats")]);if(401===e.status||401===r.status){console.log("Admin not authenticated, redirecting to login..."),u.push("/admin");return}if(e.ok){let r=await e.json();t(r.users||[])}else console.error("Failed to fetch users:",e.status),t([]);if(r.ok){let e=await r.json();l(e)}else console.error("Failed to fetch stats:",r.status),l({totalUsers:0,verifiedUsers:0,unverifiedUsers:0})}catch(e){console.error("Error fetching data:",e),t([]),l({totalUsers:0,verifiedUsers:0,unverifiedUsers:0})}finally{c(!1)}},g=async()=>{await fetch("/api/admin/logout",{method:"POST"}),u.push("/admin")},b=async(e,r)=>{if(confirm(`Bist du sicher, dass du den Benutzer "${r}" l\xf6schen m\xf6chtest? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden.`)){h(e);try{let s=await fetch(`/api/admin/users/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(s.ok)t(t=>t.filter(t=>t.id!==e)),await p(),alert(`Benutzer "${r}" wurde erfolgreich gel\xf6scht.`);else{let e=await s.json();alert(e.error||"Fehler beim L\xf6schen des Users")}}catch(e){console.error("Error deleting user:",e),alert("Ein Fehler ist aufgetreten beim L\xf6schen des Users")}finally{h(null)}}},f=async(e,r,s)=>{try{(await fetch(`/api/admin/users/${e}/social-verification`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:r,verified:!s})})).ok?t(t=>t.map(t=>t.id===e?{...t,[`${r}Verified`]:!s,isVerified:"twitch"===r?!s:t.twitchVerified&&"instagram"===r?!s:t.instagramVerified&&"discord"===r?!s:t.discordVerified}:t)):alert("Fehler beim Aktualisieren der Verifikation")}catch(e){alert("Ein Fehler ist aufgetreten")}},y=async(e,r)=>{try{(await fetch(`/api/admin/users/${e}/tier`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:r})})).ok?t(t=>t.map(t=>t.id===e?{...t,tier:r}:t)):alert("Fehler beim Aktualisieren des Tiers")}catch(e){alert("Ein Fehler ist aufgetreten")}},j=async(e,t)=>{try{let r=await fetch(`/api/admin/users/${e}/team`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamName:t})});if(r.ok)await p();else{let e=await r.json();alert(e.error||"Fehler beim Aktualisieren der Team-Zuweisung")}}catch(e){alert("Ein Fehler ist aufgetreten")}},N=async e=>{try{let r=await fetch("/api/admin/toggle-streamer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(r.ok){let s=await r.json();t(t=>t.map(t=>t.id===e?{...t,isStreamer:s.isStreamer}:t))}else alert("Fehler beim Aktualisieren des Streamer Status")}catch(e){alert("Ein Fehler ist aufgetreten")}};return d?s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Lade Admin Dashboard..."})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[s.jsx("header",{className:"bg-gray-800 border-b border-gray-700",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("nav",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-400",children:"\uD83D\uDD12 ADMIN PANEL"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-gray-300",children:"Administrator"}),s.jsx("button",{onClick:g,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors",children:"Abmelden"})]})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex space-x-1 mb-8",children:[s.jsx("button",{onClick:()=>x("overview"),className:`px-6 py-3 rounded-lg font-semibold transition-colors ${"overview"===o?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"\xdcbersicht"}),s.jsx("button",{onClick:()=>x("users"),className:`px-6 py-3 rounded-lg font-semibold transition-colors ${"users"===o?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"User Management"}),s.jsx(n.default,{href:"/admin/wheel",className:"px-6 py-3 rounded-lg font-semibold bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"\uD83C\uDFAF Gl\xfccksrad"}),s.jsx(n.default,{href:"/admin/bracket",className:"px-6 py-3 rounded-lg font-semibold bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"\uD83C\uDFC6 Tournament Bracket"})]}),"overview"===o&&(0,s.jsxs)("div",{className:"space-y-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-white",children:"Dashboard \xdcbersicht"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Registrierte User"}),s.jsx("p",{className:"text-3xl font-bold text-blue-400",children:r.totalUsers})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Verifizierte User"}),s.jsx("p",{className:"text-3xl font-bold text-green-400",children:r.verifiedUsers})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Warten auf Verifikation"}),s.jsx("p",{className:"text-3xl font-bold text-yellow-400",children:r.unverifiedUsers})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Schnellzugriff"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)(n.default,{href:"/admin/wheel",className:"bg-purple-600 text-white p-4 rounded-lg hover:bg-purple-700 transition-colors text-center",children:[s.jsx("div",{className:"text-2xl mb-2",children:"\uD83C\uDFAF"}),s.jsx("div",{className:"font-semibold",children:"Gl\xfccksrad"}),s.jsx("div",{className:"text-sm opacity-80",children:"User zu Teams zuweisen"})]}),(0,s.jsxs)(n.default,{href:"/admin/bracket",className:"bg-blue-600 text-white p-4 rounded-lg hover:bg-blue-700 transition-colors text-center",children:[s.jsx("div",{className:"text-2xl mb-2",children:"\uD83C\uDFC6"}),s.jsx("div",{className:"font-semibold",children:"Tournament Bracket"}),s.jsx("div",{className:"text-sm opacity-80",children:"Matches verwalten"})]})]})]})]}),"users"===o&&(0,s.jsxs)("div",{className:"space-y-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-white",children:"User Management"}),s.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-700",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"text-left p-4 text-gray-300",children:"Username"}),s.jsx("th",{className:"text-left p-4 text-gray-300",children:"In-Game Name"}),s.jsx("th",{className:"text-left p-4 text-gray-300",children:"Rank"}),s.jsx("th",{className:"text-left p-4 text-gray-300",children:"Tier & Status"}),s.jsx("th",{className:"text-left p-4 text-gray-300",children:"Team"}),s.jsx("th",{className:"text-left p-4 text-gray-300",children:"Twitch"}),s.jsx("th",{className:"text-left p-4 text-gray-300",children:"Instagram"}),s.jsx("th",{className:"text-left p-4 text-gray-300",children:"Discord"}),s.jsx("th",{className:"text-left p-4 text-gray-300",children:"Status"}),s.jsx("th",{className:"text-left p-4 text-gray-300",children:"Aktionen"})]})}),s.jsx("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-t border-gray-700",children:[s.jsx("td",{className:"p-4 text-white",children:e.username}),s.jsx("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-gray-300 text-sm",children:e.inGameName||"-"}),e.inGameName&&s.jsx("button",{onClick:()=>f(e.id,"inGameName",e.inGameNameVerified),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${e.inGameNameVerified?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:e.inGameNameVerified?"✅ Verifiziert":"⏳ Ausstehend"})]})}),s.jsx("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-gray-300 text-sm",children:e.inGameRank||"-"}),e.inGameRank&&s.jsx("button",{onClick:()=>f(e.id,"inGameRank",e.inGameRankVerified),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${e.inGameRankVerified?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:e.inGameRankVerified?"✅ Verifiziert":"⏳ Ausstehend"})]})}),s.jsx("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[s.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${"tier1"===e.tier?"bg-blue-600 text-white":"tier2"===e.tier?"bg-green-600 text-white":"tier3"===e.tier?"bg-yellow-600 text-white":"bg-gray-600 text-gray-300"}`,children:e.tier?e.tier.toUpperCase():"KEIN TIER"}),e.isStreamer&&s.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-purple-600 text-white",children:"\uD83C\uDFA5 STREAMER"})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsxs)("select",{value:e.tier||"",onChange:t=>y(e.id,t.target.value),className:"bg-gray-700 border border-gray-600 rounded text-xs text-white px-2 py-1 focus:outline-none focus:border-blue-500 flex-1",children:[s.jsx("option",{value:"",children:"Kein Tier"}),s.jsx("option",{value:"tier1",children:"Tier 1"}),s.jsx("option",{value:"tier2",children:"Tier 2"}),s.jsx("option",{value:"tier3",children:"Tier 3"})]}),s.jsx("button",{onClick:()=>N(e.id),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${e.isStreamer?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,title:e.isStreamer?"Streamer Status entfernen":"Als Streamer markieren",children:"\uD83C\uDFA5"})]})]})}),s.jsx("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-gray-300 text-sm",children:e.team?e.team.name:"Kein Team"}),(0,s.jsxs)("select",{value:e.team?e.team.name:"",onChange:t=>j(e.id,t.target.value),className:"bg-gray-700 border border-gray-600 rounded text-xs text-white px-2 py-1 focus:outline-none focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Kein Team"}),s.jsx("option",{value:"Team Alpha",children:"Team Alpha"}),s.jsx("option",{value:"Team Beta",children:"Team Beta"}),s.jsx("option",{value:"Team Gamma",children:"Team Gamma"}),s.jsx("option",{value:"Team Delta",children:"Team Delta"}),s.jsx("option",{value:"Team Epsilon",children:"Team Epsilon"}),s.jsx("option",{value:"Team Zeta",children:"Team Zeta"}),s.jsx("option",{value:"Team Eta",children:"Team Eta"}),s.jsx("option",{value:"Team Theta",children:"Team Theta"})]})]})}),s.jsx("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-gray-300 text-sm",children:e.twitchName||"-"}),e.twitchName&&s.jsx("button",{onClick:()=>f(e.id,"twitch",e.twitchVerified),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${e.twitchVerified?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:e.twitchVerified?"✅ Verifiziert":"⏳ Ausstehend"})]})}),s.jsx("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-gray-300 text-sm",children:e.instagramName||"-"}),e.instagramName&&s.jsx("button",{onClick:()=>f(e.id,"instagram",e.instagramVerified),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${e.instagramVerified?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:e.instagramVerified?"✅ Verifiziert":"⏳ Ausstehend"})]})}),s.jsx("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-gray-300 text-sm",children:e.discordName||"-"}),e.discordName&&s.jsx("button",{onClick:()=>f(e.id,"discord",e.discordVerified),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${e.discordVerified?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:e.discordVerified?"✅ Verifiziert":"⏳ Ausstehend"})]})}),s.jsx("td",{className:"p-4",children:(()=>{let t=e.twitchName||e.instagramName||e.discordName,r=e.inGameName||e.inGameRank,a=(!e.twitchName||e.twitchVerified)&&(!e.instagramName||e.instagramVerified)&&(!e.discordName||e.discordVerified),i=(!e.inGameName||e.inGameNameVerified)&&(!e.inGameRank||e.inGameRankVerified),n=e.twitchVerified||e.instagramVerified||e.discordVerified||e.inGameNameVerified||e.inGameRankVerified;return t||r?a&&i?s.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded text-sm",children:"Vollst\xe4ndig verifiziert"}):n?s.jsx("span",{className:"bg-yellow-600 text-white px-2 py-1 rounded text-sm",children:"Teilweise verifiziert"}):s.jsx("span",{className:"bg-red-600 text-white px-2 py-1 rounded text-sm",children:"Nicht verifiziert"}):s.jsx("span",{className:"bg-gray-600 text-white px-2 py-1 rounded text-sm",children:"Keine Infos"})})()}),s.jsx("td",{className:"p-4",children:s.jsx("div",{className:"flex space-x-2",children:s.jsx("button",{onClick:()=>b(e.id,e.username),disabled:m===e.id,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center space-x-1",children:m===e.id?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"..."})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{children:"\uD83D\uDDD1️"}),s.jsx("span",{children:"L\xf6schen"})]})})})})]},e.id))})]})})})]})]})]})}},3624:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\Users\hAiQ\Desktop\cup\src\app\admin\dashboard\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,7855,6881],()=>r(5623));module.exports=s})();