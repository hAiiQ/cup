(()=>{var e={};e.id=2263,e.ids=[2263],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},7589:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(5905),r(134),r(5866);var s=r(3191),a=r(8716),i=r(7922),n=r.n(i),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["admin",{children:["bracket",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5905)),"C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\admin\\bracket\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,134)),"C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\admin\\bracket\\page.tsx"],m="/admin/bracket/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/bracket/page",pathname:"/admin/bracket",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7031:(e,t,r)=>{Promise.resolve().then(r.bind(r,6303))},6303:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(326),a=r(7577),i=r(5047);function n(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),[l,o]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null),[m,x]=(0,a.useState)({team1:0,team2:0}),p=(0,i.useRouter)(),u=async()=>{try{let[e,r]=await Promise.all([fetch("/api/admin/teams"),fetch("/api/bracket/matches")]),s={teams:[]};if(e.ok){let r=(s=await e.json()).teams.sort((e,t)=>e.position-t.position);t(r)}let a=h(s.teams||[]);if(r.ok){let e=await r.json();console.log("Database matches:",e.matches),e.matches&&e.matches.length>0&&e.matches.forEach(e=>{let t=a.findIndex(t=>t.id===e.id);-1!==t&&(a[t]={...a[t],...e,team1Score:e.team1Score||0,team2Score:e.team2Score||0,isFinished:e.isFinished||!1})})}n(a)}catch(e){console.error("Error fetching data:",e),n(h([]))}finally{o(!1)}},h=e=>{let t=[],r=e.length>=8?e.slice(0,8):[{id:"alpha",name:"Team Alpha",position:1},{id:"beta",name:"Team Beta",position:2},{id:"gamma",name:"Team Gamma",position:3},{id:"delta",name:"Team Delta",position:4},{id:"echo",name:"Team Echo",position:5},{id:"foxtrot",name:"Team Foxtrot",position:6},{id:"golf",name:"Team Golf",position:7},{id:"hotel",name:"Team Hotel",position:8}];[{team1:r[0],team2:r[1]},{team1:r[2],team2:r[3]},{team1:r[4],team2:r[5]},{team1:r[6],team2:r[7]}].forEach((e,r)=>{t.push({id:`wb-qf-${r+1}`,round:1,matchNumber:r+1,team1:e.team1,team2:e.team2,team1Score:0,team2Score:0,isFinished:!1,bracket:"winner"})});for(let e=0;e<2;e++)t.push({id:`wb-sf-${e+1}`,round:2,matchNumber:e+1,team1Score:0,team2Score:0,isFinished:!1,bracket:"winner"});t.push({id:"wb-final",round:3,matchNumber:1,team1Score:0,team2Score:0,isFinished:!1,bracket:"winner"});for(let e=0;e<2;e++)t.push({id:`lb-r1-${e+1}`,round:1,matchNumber:e+1,team1Score:0,team2Score:0,isFinished:!1,bracket:"loser"});for(let e=0;e<2;e++)t.push({id:`lb-r2-${e+1}`,round:2,matchNumber:e+1,team1Score:0,team2Score:0,isFinished:!1,bracket:"loser"});return t.push({id:"lb-r3",round:3,matchNumber:1,team1Score:0,team2Score:0,isFinished:!1,bracket:"loser"}),t.push({id:"lb-final",round:4,matchNumber:1,team1Score:0,team2Score:0,isFinished:!1,bracket:"loser"}),t.push({id:"grand-final",round:4,matchNumber:1,team1Score:0,team2Score:0,isFinished:!1,bracket:"grand"}),t},b=async(e,t,r)=>{try{let s=await fetch("/api/admin/bracket/matches/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({matchId:e,team1Score:t,team2Score:r})});s.ok?(await s.json(),d(null),await u()):alert("Fehler beim Speichern des Ergebnisses")}catch(e){console.error("Error updating match:",e),alert("Ein Fehler ist aufgetreten")}},g=async()=>{if(confirm("M\xf6chtest du wirklich das gesamte Tournament zur\xfccksetzen? Alle Ergebnisse gehen verloren!"))try{if((await fetch("/api/admin/bracket/reset",{method:"POST",headers:{"Content-Type":"application/json"}})).ok){let t=h(e);n(t),alert("Tournament erfolgreich zur\xfcckgesetzt!")}else alert("Fehler beim Zur\xfccksetzen des Tournaments")}catch(e){console.error("Error resetting tournament:",e),alert("Ein Fehler ist aufgetreten")}},f=(e,t)=>r.filter(r=>r.bracket===e&&r.round===t),j=()=>r.find(e=>"grand"===e.bracket),N=e=>{d(e),x({team1:e.team1Score,team2:e.team2Score})},y=({match:e,className:t=""})=>{let r=e?.team1?.name||"TBD",a=e?.team2?.name||"TBD",i=e&&(e.team1Score>0||e.team2Score>0),n=e?.team1Score||0,l=e?.team2Score||0,o=e?.isLive||!1,c=i&&n>l,d=i&&l>n,m=c?"text-green-400 font-bold":d?"text-gray-500":"text-white",x=d?"text-green-400 font-bold":c?"text-gray-500":"text-white",p=async t=>{if(t.stopPropagation(),e)try{(await fetch("/api/admin/bracket/matches/live",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({matchId:e.id,isLive:!o})})).ok?await u():alert("Fehler beim \xc4ndern des Live-Status")}catch(e){console.error("Error toggling live status:",e),alert("Fehler beim \xc4ndern des Live-Status")}};return(0,s.jsxs)("div",{className:`bg-gray-700/90 border border-gray-600 rounded-lg p-3 w-full min-h-[80px] flex flex-col justify-center cursor-pointer hover:border-purple-500 transition-colors ${o?"border-red-500 bg-red-900/20":""} ${t}`,children:[e&&(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("div",{className:"flex items-center space-x-2",children:o&&(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-red-400 text-xs font-bold",children:"LIVE"})]})}),s.jsx("button",{onClick:p,className:`px-2 py-1 text-xs rounded ${o?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:o?"STOP":"START"})]}),s.jsx("div",{className:"text-center text-sm font-medium flex-1 flex items-center justify-center",onClick:()=>e&&N(e),children:i?(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("span",{className:`${m}`,children:n}),s.jsx("span",{className:m,children:r}),s.jsx("span",{className:"text-white",children:"VS"}),s.jsx("span",{className:x,children:a}),s.jsx("span",{className:`${x}`,children:l})]}):(0,s.jsxs)("div",{className:"text-white",children:[r," VS ",a]})})]})};return l?s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Lade Tournament Bracket..."})}):(0,s.jsxs)("div",{className:"min-h-screen bg-image",children:[s.jsx("header",{className:"bg-gray-800 border-b border-gray-700",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("nav",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-400",children:"\uD83C\uDFC6 MARVEL RIVALS TOURNAMENT BRACKET (ADMIN)"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"text-gray-300 text-sm",children:[e.length," Teams registriert"]}),s.jsx("div",{className:"text-green-400 text-sm font-semibold",children:"✓ Auto-Update aktiv"}),s.jsx("button",{onClick:g,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors",children:"\uD83D\uDD04 Tournament zur\xfccksetzen"}),s.jsx("button",{onClick:()=>p.push("/admin/dashboard"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors",children:"Zur\xfcck zum Dashboard"})]})]})})}),(0,s.jsxs)("div",{className:"w-full px-4 py-8",children:[(0,s.jsxs)("div",{className:"relative bg-black/20 backdrop-blur-sm rounded-xl p-6 border border-purple-500/50 w-full",children:[s.jsx("div",{className:"absolute",style:{top:"175px",left:"365px",zIndex:1},children:s.jsx("img",{src:"/lines.png",alt:"Bracket Lines",className:"select-none pointer-events-none",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",width:"auto",height:"auto",maxWidth:"none",maxHeight:"none"},draggable:!1})}),(0,s.jsxs)("div",{className:"w-full relative",style:{height:"600px"},children:[(0,s.jsxs)("div",{className:"absolute bg-black/30 rounded-lg border border-purple-500/30 p-4",style:{left:"21px",top:"135px",zIndex:2,width:"320px"},children:[s.jsx("div",{className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-bold text-center w-full text-sm mb-3",children:"RUNDE 1 - STARTER BRACKET"}),s.jsx("div",{className:"space-y-2",children:f("winner",1).map((e,t)=>{let[r,a]=[["Team Alpha","Team Beta"],["Team Gamma","Team Delta"],["Team Echo","Team Foxtrot"],["Team Golf","Team Hotel"]][t]||["TBD","TBD"],i={...e,team1:e.team1||{id:`temp-team1-${e.id}`,name:r,position:1},team2:e.team2||{id:`temp-team2-${e.id}`,name:a,position:2}};return s.jsx("div",{onClick:()=>N(e),children:s.jsx(y,{match:i,className:"w-full h-auto"})},e.id)})})]}),(0,s.jsxs)("div",{className:"absolute bg-black/30 rounded-lg border border-purple-500/30 p-4",style:{left:"387px",top:"55px",zIndex:2,width:"320px"},children:[s.jsx("div",{className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-bold text-center w-full text-sm mb-3",children:"RUNDE 2 - UPPER BRACKET"}),s.jsx("div",{className:"space-y-3",children:f("winner",2).map((e,t)=>s.jsx(y,{match:e},e.id))})]}),(0,s.jsxs)("div",{className:"absolute bg-black/30 rounded-lg border border-purple-500/30 p-4",style:{left:"1117px",top:"93px",zIndex:2,width:"320px"},children:[s.jsx("div",{className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-bold text-center w-full text-sm mb-3",children:"RUNDE 5 - UPPER BRACKET"}),s.jsx("div",{children:f("winner",3).map(e=>s.jsx(y,{match:e},e.id))})]}),(0,s.jsxs)("div",{className:"absolute bg-black/30 rounded-lg border border-purple-500/30 p-4",style:{left:"387px",top:"323px",zIndex:2,width:"320px"},children:[s.jsx("div",{className:"bg-purple-700 text-white px-4 py-2 rounded-lg font-bold text-center w-full text-sm mb-3",children:"RUNDE 3 - LOWER BRACKET"}),s.jsx("div",{className:"space-y-3",children:f("loser",1).map(e=>s.jsx(y,{match:e},e.id))})]}),(0,s.jsxs)("div",{className:"absolute bg-black/30 rounded-lg border border-purple-500/30 p-4",style:{left:"752px",top:"323px",zIndex:2,width:"320px"},children:[s.jsx("div",{className:"bg-purple-700 text-white px-4 py-2 rounded-lg font-bold text-center w-full text-sm mb-3",children:"RUNDE 4 - LOWER BRACKET"}),s.jsx("div",{className:"space-y-3",children:f("loser",2).map(e=>s.jsx(y,{match:e},e.id))})]}),(0,s.jsxs)("div",{className:"absolute bg-black/30 rounded-lg border border-purple-500/30 p-4",style:{left:"1117px",top:"361px",zIndex:2,width:"320px"},children:[s.jsx("div",{className:"bg-purple-700 text-white px-4 py-2 rounded-lg font-bold text-center w-full text-sm mb-3",children:"RUNDE 6 - LOWER BRACKET"}),s.jsx("div",{children:f("loser",3).map(e=>s.jsx(y,{match:e},e.id))})]}),(0,s.jsxs)("div",{className:"absolute bg-black/30 rounded-lg border border-purple-500/30 p-4",style:{left:"1482px",top:"361px",zIndex:2,width:"320px"},children:[s.jsx("div",{className:"bg-purple-700 text-white px-4 py-2 rounded-lg font-bold text-center w-full text-sm mb-3",children:"RUNDE 7 - LOWER BRACKET FINALS"}),s.jsx("div",{children:f("loser",5).map(e=>s.jsx(y,{match:e},e.id))})]}),(0,s.jsxs)("div",{className:"absolute bg-black/30 rounded-lg border border-yellow-500/50 p-4",style:{left:"1482px",top:"93px",zIndex:2,width:"320px"},children:[s.jsx("div",{className:"bg-yellow-500 text-black px-4 py-2 rounded-lg font-bold text-center w-full text-sm mb-3 flex items-center justify-center",children:"RUNDE 8 - \uD83C\uDFC6 GRAND FINALS"}),s.jsx("div",{children:j()&&s.jsx(y,{match:j()})})]})]})]}),(0,s.jsxs)("div",{className:"mt-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-4",children:"TEILNEHMENDE TEAMS"}),s.jsx("div",{className:"grid md:grid-cols-4 gap-3",children:e.length>=8?e.slice(0,8).map((e,t)=>(0,s.jsxs)("div",{className:"bg-purple-600/20 backdrop-blur-sm rounded-lg p-3 border border-purple-500/50",children:[s.jsx("h3",{className:"text-white font-semibold text-center text-base",children:e.name}),(0,s.jsxs)("p",{className:"text-purple-200 text-center text-xs",children:["Position ",e.position]})]},e.id)):["Team Alpha","Team Beta","Team Gamma","Team Delta","Team Echo","Team Foxtrot","Team Golf","Team Hotel"].map((e,t)=>(0,s.jsxs)("div",{className:"bg-purple-600/20 backdrop-blur-sm rounded-lg p-3 border border-purple-500/50",children:[s.jsx("h3",{className:"text-white font-semibold text-center text-base",children:e}),(0,s.jsxs)("p",{className:"text-purple-200 text-center text-xs",children:["Position ",t+1]})]},t))})]})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-96 border border-gray-600",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:["winner"===c.bracket?"Winner Bracket":"loser"===c.bracket?"Loser Bracket":"Grand Final"," - Round ",c.round," #",c.matchNumber]}),c.team1&&c.team2?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-gray-300 font-semibold",children:c.team1.name}),s.jsx("input",{type:"number",min:"0",max:"3",value:m.team1,onChange:e=>x(t=>({...t,team1:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-gray-300 font-semibold",children:c.team2.name}),s.jsx("input",{type:"number",min:"0",max:"3",value:m.team2,onChange:e=>x(t=>({...t,team2:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),s.jsx("div",{className:"text-center text-gray-400 text-sm",children:"Best of 3 - Erstes Team auf 2 Punkte gewinnt"}),(0,s.jsxs)("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{onClick:()=>b(c.id,m.team1,m.team2),className:"flex-1 bg-green-600 text-white py-2 rounded hover:bg-green-700 transition-colors font-semibold",children:"\uD83D\uDCBE Speichern"}),s.jsx("button",{onClick:()=>d(null),className:"flex-1 bg-red-600 text-white py-2 rounded hover:bg-red-700 transition-colors",children:"❌ Abbrechen"})]})]}):(0,s.jsxs)("div",{className:"text-center text-gray-400",children:[s.jsx("p",{children:"Teams noch nicht verf\xfcgbar"}),s.jsx("p",{className:"text-sm mt-2",children:"Vorherige Matches m\xfcssen erst abgeschlossen werden"}),s.jsx("button",{onClick:()=>d(null),className:"mt-4 bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors",children:"Schlie\xdfen"})]})]})})]})}},5905:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\Users\hAiQ\Desktop\cup\src\app\admin\bracket\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,7855,6881],()=>r(7589));module.exports=s})();