(()=>{var e={};e.id=5530,e.ids=[5530],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},5132:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d}),t(9766),t(134),t(5866);var s=t(3191),l=t(8716),a=t(7922),i=t.n(a),n=t(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(r,o);let d=["",{children:["admin",{children:["wheel",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9766)),"C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\admin\\wheel\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,134)),"C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\admin\\wheel\\page.tsx"],x="/admin/wheel/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/admin/wheel/page",pathname:"/admin/wheel",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8393:(e,r,t)=>{Promise.resolve().then(t.bind(t,3070))},3070:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var s=t(326),l=t(7577),a=t(5047);function i(){let[e,r]=(0,l.useState)([]),[t,i]=(0,l.useState)([]),[n,o]=(0,l.useState)([]),[d,c]=(0,l.useState)("all"),[x,u]=(0,l.useState)("all"),[m,h]=(0,l.useState)(""),[p,g]=(0,l.useState)(!1),[b,f]=(0,l.useState)(null),[j,N]=(0,l.useState)(0),v=(0,l.useRef)(null),w=(0,l.useRef)(null),y=(0,a.useRouter)(),D=async()=>{try{let[e,t]=await Promise.all([fetch("/api/admin/wheel/users"),fetch("/api/admin/wheel/teams")]);if(401===e.status||401===t.status){y.push("/admin");return}if(e.ok){let t=await e.json();r(t.users||[])}if(t.ok){let e=await t.json();i(e.teams||[])}}catch(e){console.error("Error fetching data:",e)}},C=async()=>{if(b&&m)try{let t=await fetch("/api/admin/wheel/assign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:b.id,teamId:m})});if(t.ok)r(e.filter(e=>e.id!==b.id)),f(null),await D();else{let e=await t.json();alert("Fehler: "+e.error)}}catch(e){alert("Ein Fehler ist aufgetreten")}},F=t.filter(e=>e.memberCount<6);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[s.jsx("header",{className:"bg-gray-800 border-b border-gray-700",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("nav",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-400",children:"\uD83C\uDFAF WHEEL OF NAMES STYLE"}),s.jsx("button",{onClick:()=>y.push("/admin/dashboard"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors",children:"Zur\xfcck zum Dashboard"})]})})}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"\uD83C\uDFAF Wheel of Names Style"}),s.jsx("p",{className:"text-gray-400",children:"Exakt wie wheelofnames.com - garantiert korrekte Gewinner!"})]}),0===n.length&&s.jsx("div",{className:"bg-red-800/30 border border-red-600 rounded-xl p-6 mb-8",children:(0,s.jsxs)("div",{className:"flex items-center text-red-200",children:[s.jsx("span",{className:"text-3xl mr-4",children:"⚠️"}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:"Keine verf\xfcgbaren User"}),s.jsx("p",{children:"Es sind keine User mit den aktuellen Filtereinstellungen verf\xfcgbar."})]})]})}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700 mb-8",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Tier Filter:"}),(0,s.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,s.jsxs)("option",{value:"all",children:["Alle Tiers (",e.filter(e=>e.tier&&["tier1","tier2","tier3"].includes(e.tier)).length," User)"]}),(0,s.jsxs)("option",{value:"tier1",children:["Tier 1 (",e.filter(e=>"tier1"===e.tier).length," User)"]}),(0,s.jsxs)("option",{value:"tier2",children:["Tier 2 (",e.filter(e=>"tier2"===e.tier).length," User)"]}),(0,s.jsxs)("option",{value:"tier3",children:["Tier 3 (",e.filter(e=>"tier3"===e.tier).length," User)"]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-gray-300 mb-2 font-semibold",children:"\uD83C\uDFA5 Streamer Filter:"}),(0,s.jsxs)("select",{value:x,onChange:e=>u(e.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[s.jsx("option",{value:"all",children:"Alle User"}),s.jsx("option",{value:"streamers",children:"\uD83C\uDFA5 Nur Streamer"}),s.jsx("option",{value:"non-streamers",children:"\uD83D\uDC64 Keine Streamer"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Ziel Team:"}),(0,s.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[s.jsx("option",{value:"",children:"Team ausw\xe4hlen..."}),F.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.memberCount,"/6)"]},e.id))]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{if(0===n.length||!m||p)return;g(!0),f(null);let e=Math.floor(Math.random()*n.length),r=n[e];console.log("\uD83C\uDFAF PRE-SELECTED WINNER:",r.username,"at index",e);let t=360/n.length,s=e*t+270,l=s+t/2,a=(360-l%360)%360,i=8+4*Math.random(),o=360*i+a;console.log("\uD83C\uDFAF SPIN CALCULATION:",{winnerIndex:e,winnerSegmentStart:s.toFixed(1)+"\xb0",winnerSegmentMiddle:l.toFixed(1)+"\xb0",targetFinalAngle:a.toFixed(1)+"\xb0",extraRotations:i,totalRotation:o.toFixed(1)+"\xb0"});let d=Date.now(),c=()=>{let e=Math.min((Date.now()-d)/8e3,1);N((j+o*(1-Math.pow(1-e,3)))%360),e<1?w.current=requestAnimationFrame(c):(console.log("\uD83C\uDFAF SPIN COMPLETE - WINNER CONFIRMED:",r.username),f(r),g(!1))};w.current=requestAnimationFrame(c)},disabled:0===n.length||!m||p,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-lg shadow-lg",children:p?"\uD83C\uDFAF SPINNING...":"\uD83C\uDFAF SPIN THE WHEEL!"})})]}),s.jsx("div",{className:"bg-green-800/30 border border-green-600 rounded-lg p-4 mt-6",children:(0,s.jsxs)("div",{className:"flex items-center text-green-200",children:[s.jsx("span",{className:"text-2xl mr-3",children:"✅"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:["Verf\xfcgbar: ",n.length," User"]}),s.jsx("p",{className:"text-sm text-green-300",children:"Wheel of Names Algorithmus - 100% korrekt!"})]})]})})]}),(0,s.jsxs)("div",{className:"grid xl:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"xl:col-span-2 flex flex-col items-center space-y-8",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 z-20",children:s.jsx("div",{className:"w-0 h-0 border-l-[20px] border-r-[20px] border-t-[30px] border-l-transparent border-r-transparent border-t-white shadow-xl drop-shadow-lg"})}),s.jsx("canvas",{ref:v,width:500,height:500,className:"rounded-full shadow-2xl"})]}),b&&!p&&(0,s.jsxs)("div",{className:"bg-gradient-to-br from-yellow-400 via-orange-500 to-red-500 rounded-2xl p-8 border-4 border-yellow-300 shadow-2xl max-w-lg w-full",children:[s.jsx("h3",{className:"text-4xl font-bold text-white mb-6 text-center drop-shadow-lg",children:"\uD83C\uDF89 WINNER!"}),(0,s.jsxs)("div",{className:"text-white space-y-4 text-center",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold drop-shadow-lg",children:[b.isStreamer&&"\uD83C\uDFA5 ",b.username]}),(0,s.jsxs)("div",{className:"text-xl",children:[s.jsx("strong",{children:"In-Game:"})," ",b.inGameName||"Not specified"]}),(0,s.jsxs)("div",{className:"text-xl",children:[s.jsx("strong",{children:"Tier:"}),s.jsx("span",{className:`ml-2 px-4 py-2 rounded-full font-bold text-lg ${"tier1"===b.tier?"bg-blue-600":"tier2"===b.tier?"bg-green-600":"tier3"===b.tier?"bg-purple-600":"bg-gray-600"}`,children:b.tier?.toUpperCase()})]})]}),s.jsx("button",{onClick:C,className:"mt-8 w-full bg-green-600 text-white px-8 py-4 rounded-xl hover:bg-green-700 transition-all font-bold text-2xl shadow-lg transform hover:scale-105",children:"✅ ADD TO TEAM"})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-white mb-4",children:["Available Users (",n.length,")"]}),s.jsx("div",{className:"bg-gray-800 rounded-xl border border-gray-700 max-h-96 overflow-y-auto",children:0===n.length?(0,s.jsxs)("div",{className:"p-6 text-gray-400 text-center",children:[s.jsx("div",{className:"text-4xl mb-3",children:"\uD83D\uDE14"}),s.jsx("p",{children:"No users available"})]}):s.jsx("div",{className:"p-4 space-y-2",children:n.map((e,r)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors border-l-4",style:{borderLeftColor:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#FFB347"][r%8]},children:[(0,s.jsxs)("div",{className:"text-white",children:[(0,s.jsxs)("div",{className:"font-semibold",children:[e.isStreamer&&"\uD83C\uDFA5 ",e.username]}),s.jsx("div",{className:"text-sm text-gray-300",children:e.inGameName||"No In-Game Name"})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${"tier1"===e.tier?"bg-blue-600 text-white":"tier2"===e.tier?"bg-green-600 text-white":"tier3"===e.tier?"bg-yellow-600 text-white":"bg-gray-600 text-white"}`,children:e.tier?.toUpperCase()})]},e.id))})})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Teams Overview"}),s.jsx("div",{className:"space-y-3",children:t.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-700 rounded-lg",children:[s.jsx("span",{className:"text-white font-medium",children:e.name}),(0,s.jsxs)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${e.memberCount>=6?"bg-red-600 text-white":e.memberCount>=4?"bg-yellow-600 text-white":"bg-green-600 text-white"}`,children:[e.memberCount,"/6"]})]},e.id))})]})]})]})]})})]})}},9766:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(8570).createProxy)(String.raw`C:\Users\hAiQ\Desktop\cup\src\app\admin\wheel\page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[8948,7855,6881],()=>t(5132));module.exports=s})();