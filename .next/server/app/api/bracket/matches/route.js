"use strict";(()=>{var e={};e.id=1880,e.ids=[1880],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7056:(e,n,t)=>{t.r(n),t.d(n,{originalPathname:()=>b,patchFetch:()=>w,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>p});var a={};t.r(a),t.d(a,{GET:()=>d,dynamic:()=>m});var r=t(9303),i=t(8716),o=t(670),s=t(7070),l=t(3741);let m="force-dynamic";async function d(){try{console.log("\uD83D\uDD04 Fetching matches for bracket with admin states...");let e=(0,l.QG)();console.log(`ðŸ“Š Found ${e.size} admin-controlled match states`);let n=[];try{console.log("\uD83D\uDD0D Fetching teams directly from database...");let{prisma:e}=await t.e(3538).then(t.bind(t,3538));n=(await e.team.findMany({orderBy:{position:"asc"}})).map(e=>({id:e.id,name:e.name,position:e.position})),console.log(`ðŸ“‹ Loaded ${n.length} teams directly from database:`,n.map(e=>e.name))}catch(e){console.log("\uD83D\uDCA1 Database fetch error, using fallback teams:",e)}for(0===n.length&&(n=[{id:"alpha",name:"Team Alpha",position:1},{id:"beta",name:"Team Beta",position:2},{id:"gamma",name:"Team Gamma",position:3},{id:"delta",name:"Team Delta",position:4},{id:"echo",name:"Team Echo",position:5},{id:"foxtrot",name:"Team Foxtrot",position:6},{id:"golf",name:"Team Golf",position:7},{id:"hotel",name:"Team Hotel",position:8}],console.log("\uD83C\uDFAF Using sample teams for consistent bracket display"));n.length<8;)n.push({id:`placeholder-${n.length+1}`,name:`Team ${n.length+1}`,position:n.length+1});let a=[],r=n.slice(0,8),i=(n,t,a)=>{let r=e.get(n);return{id:n,team1:t,team2:a,team1Score:r?.team1Score||0,team2Score:r?.team2Score||0,isLive:r?.isLive||!1,isFinished:r?.isFinished||!1,winnerId:r?.winnerId||null}};for(let e=0;e<4;e++){let n=r[2*e]||{id:`team-${2*e+1}`,name:`Team ${2*e+1}`},t=r[2*e+1]||{id:`team-${2*e+2}`,name:`Team ${2*e+2}`};console.log(`ðŸ† Quarter ${e+1}: ${n.name} vs ${t.name}`);let o=i(`WB-Q${e+1}`,n,t);a.push({...o,round:"Quarterfinals",bracket:"winner"})}for(let e=0;e<2;e++){let n=i(`WB-S${e+1}`,{id:`wb-q${2*e+1}-winner`,name:`WB Q${2*e+1} Winner`},{id:`wb-q${2*e+2}-winner`,name:`WB Q${2*e+2} Winner`});a.push({...n,round:"Semifinals",bracket:"winner"})}let o=i("WB-F",{id:"wb-s1-winner",name:"WB S1 Winner"},{id:"wb-s2-winner",name:"WB S2 Winner"});a.push({...o,round:"Winner Final",bracket:"winner"});for(let e=0;e<2;e++){let n=i(`LB-1-${e+1}`,{id:`wb-q${2*e+1}-loser`,name:`WB Q${2*e+1} Loser`},{id:`wb-q${2*e+2}-loser`,name:`WB Q${2*e+2} Loser`});a.push({...n,round:"Loser Round 1",bracket:"loser"})}for(let e=0;e<2;e++){let n=i(`LB-2-${e+1}`,{id:`lb-1-${e+1}-winner`,name:`LB 1-${e+1} Winner`},{id:`wb-s${e+1}-loser`,name:`WB S${e+1} Loser`});a.push({...n,round:"Loser Round 2",bracket:"loser"})}let m=i("LB-S",{id:"lb-2-1-winner",name:"LB 2-1 Winner"},{id:"lb-2-2-winner",name:"LB 2-2 Winner"});a.push({...m,round:"Loser Semifinal",bracket:"loser"});let d=i("LB-F",{id:"lb-s-winner",name:"LB Semi Winner"},{id:"wb-f-loser",name:"WB Final Loser"});a.push({...d,round:"Loser Final",bracket:"loser"});let c=i("GF",{id:"wb-f-winner",name:"WB Final Winner"},{id:"lb-f-winner",name:"LB Final Winner"});return a.push({...c,round:"Grand Final",bracket:"final"}),console.log(`âœ… Generated ${a.length} matches with admin control states`),s.NextResponse.json({matches:a,teams:r,lastUpdated:new Date().toISOString(),adminControlled:e.size>0})}catch(e){return console.error("âŒ Bracket matches error:",e),s.NextResponse.json({error:"Failed to fetch bracket matches",matches:[],teams:[]},{status:500})}}let c=new r.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/bracket/matches/route",pathname:"/api/bracket/matches",filename:"route",bundlePath:"app/api/bracket/matches/route"},resolvedPagePath:"C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\api\\bracket\\matches\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:u,staticGenerationAsyncStorage:p,serverHooks:h}=c,b="/api/bracket/matches/route";function w(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:p})}},3741:(e,n,t)=>{t.d(n,{QG:()=>i,TQ:()=>o,vp:()=>s});let a=new Map;function r(e,n){let t={...a.get(e)||{isLive:!1,team1Score:0,team2Score:0,isFinished:!1,lastUpdated:Date.now()},...n,lastUpdated:Date.now()};return a.set(e,t),console.log(`ðŸ“ Match ${e} state updated:`,t),t}function i(){return a}function o(e,n){return r(e,{isLive:n})}function s(e,n,t){let a=n>0||t>0;return r(e,{team1Score:n,team2Score:t,isFinished:a,isLive:!a})}}};var n=require("../../../../webpack-runtime.js");n.C(e);var t=e=>n(n.s=e),a=n.X(0,[8948,5972],()=>t(7056));module.exports=a})();