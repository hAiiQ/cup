"use strict";(()=>{var e={};e.id=5568,e.ids=[5568],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},6162:e=>{e.exports=require("stream")},1764:e=>{e.exports=require("util")},9821:(e,r,a)=>{a.r(r),a.d(r,{originalPathname:()=>x,patchFetch:()=>y,requestAsyncStorage:()=>p,routeModule:()=>m,serverHooks:()=>v,staticGenerationAsyncStorage:()=>A});var n={};a.r(n),a.d(n,{GET:()=>l,dynamic:()=>d});var s=a(9303),t=a(8716),i=a(670),o=a(7070),c=a(728),u=a(5456);let d="force-dynamic";async function l(e){try{if(console.log("\uD83D\uDD27 Creating default admin account..."),await c._.admin.findUnique({where:{username:"admin"}}))return console.log("⚠️ Admin already exists"),o.NextResponse.json({success:!0,message:"Admin account already exists",credentials:{username:"admin",password:"admin123"}});let e=await (0,u.c_)("admin123"),r=await c._.admin.create({data:{username:"admin",password:e,role:"SUPER_ADMIN"}});return console.log("✅ Admin account created successfully"),o.NextResponse.json({success:!0,message:"Admin account created successfully! \uD83C\uDF89",credentials:{username:"admin",password:"admin123"},admin:{id:r.id,username:r.username,role:r.role}})}catch(e){return console.error("❌ Admin creation error:",e),o.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Unknown error"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:t.x.APP_ROUTE,page:"/api/create-admin/route",pathname:"/api/create-admin",filename:"route",bundlePath:"app/api/create-admin/route"},resolvedPagePath:"C:\\Users\\hAiQ\\Desktop\\cup\\src\\app\\api\\create-admin\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:A,serverHooks:v}=m,x="/api/create-admin/route";function y(){return(0,i.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:A})}},5456:(e,r,a)=>{a.d(r,{Gv:()=>o,RA:()=>c,WX:()=>u,c_:()=>i});var n=a(8691),s=a(1482),t=a.n(s);let i=async e=>n.ZP.hash(e,12),o=async(e,r)=>n.ZP.compare(e,r),c=e=>{let r=process.env.JWT_SECRET||"tournament-secret-key-2024-fallback";return t().sign({userId:e},r,{expiresIn:"7d"})},u=e=>{try{let r=process.env.JWT_SECRET||"tournament-secret-key-2024-fallback";return t().verify(e,r)}catch{return null}}},728:(e,r,a)=>{a.d(r,{_:()=>t});let n=require("@prisma/client"),s=globalThis;process.env.DATABASE_URL||(console.error("❌ DATABASE_URL environment variable is not set!"),console.log("\uD83D\uDD27 Please set DATABASE_URL in your Render environment variables"));let t=s.prisma??new n.PrismaClient({})}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),n=r.X(0,[8948,5972,1482,8691],()=>a(9821));module.exports=n})();