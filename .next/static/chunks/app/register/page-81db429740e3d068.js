(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{6544:function(e,s,t){Promise.resolve().then(t.bind(t,564))},9376:function(e,s,t){"use strict";var r=t(5475);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},564:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var r=t(7437),l=t(2265),a=t(9376),i=t(4362),n=t(7648);function d(){let[e,s]=(0,l.useState)({username:"",password:"",confirmPassword:"",inGameName:"",inGameRank:"",discordName:"",twitchName:"",instagramName:""}),[t,d]=(0,l.useState)(""),[c,o]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!1),h=(0,a.useRouter)(),{login:u}=(0,i.a)(),p=async s=>{if(s.preventDefault(),d(""),e.password!==e.confirmPassword){d("Passw\xf6rter stimmen nicht \xfcberein");return}if(e.password.length<6){d("Passwort muss mindestens 6 Zeichen lang sein");return}x(!0)},g=async()=>{o(!0);try{let s=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password,inGameName:e.inGameName,inGameRank:e.inGameRank,discordName:e.discordName,twitchName:e.twitchName,instagramName:e.instagramName,rulesAccepted:!0}),credentials:"include"}),t=await s.json();s.ok&&t.token&&t.user?(u(t.token,t.user),h.push("/dashboard")):d(t.error||"Ein Fehler ist aufgetreten")}catch(e){console.error("Registration error:",e),d("Ein Fehler ist aufgetreten")}finally{o(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-image flex items-center justify-center px-4",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-8 w-full max-w-md border border-white/20",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Registrierung"}),(0,r.jsx)("p",{className:"text-white/80",children:"Erstelle deinen Tournament Account"})]}),(0,r.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-white mb-2",children:"Benutzername *"}),(0,r.jsx)("input",{type:"text",id:"username",required:!0,className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Dein Benutzername",value:e.username,onChange:t=>s({...e,username:t.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-white mb-2",children:"Passwort *"}),(0,r.jsx)("input",{type:"password",id:"password",required:!0,className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Mindestens 6 Zeichen",value:e.password,onChange:t=>s({...e,password:t.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-white mb-2",children:"Passwort best\xe4tigen *"}),(0,r.jsx)("input",{type:"password",id:"confirmPassword",required:!0,className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Passwort wiederholen",value:e.confirmPassword,onChange:t=>s({...e,confirmPassword:t.target.value})})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"inGameName",className:"block text-white mb-2",children:"Spielername *"}),(0,r.jsx)("input",{type:"text",id:"inGameName",required:!0,className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Marvel Rivals Name",value:e.inGameName,onChange:t=>s({...e,inGameName:t.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"inGameRank",className:"block text-white mb-2",children:"H\xf6chster Rank *"}),(0,r.jsxs)("select",{id:"inGameRank",required:!0,className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white focus:outline-none focus:ring-2 focus:ring-purple-500",value:e.inGameRank,onChange:t=>s({...e,inGameRank:t.target.value}),children:[(0,r.jsx)("option",{value:"",className:"bg-gray-800",children:"W\xe4hle deinen Rank"}),(0,r.jsx)("option",{value:"Gold",className:"bg-gray-800",children:"Gold"}),(0,r.jsx)("option",{value:"Platinum",className:"bg-gray-800",children:"Platinum"}),(0,r.jsx)("option",{value:"Diamond",className:"bg-gray-800",children:"Diamond"}),(0,r.jsx)("option",{value:"Grandmaster",className:"bg-gray-800",children:"Grandmaster"}),(0,r.jsx)("option",{value:"Celestial",className:"bg-gray-800",children:"Celestial"}),(0,r.jsx)("option",{value:"Eternity",className:"bg-gray-800",children:"Eternity"}),(0,r.jsx)("option",{value:"One Above All",className:"bg-gray-800",children:"One Above All"})]})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"discordName",className:"block text-white mb-2",children:"Discord Name"}),(0,r.jsx)("input",{type:"text",id:"discordName",className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"dein_discord_name",value:e.discordName,onChange:t=>s({...e,discordName:t.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"twitchName",className:"block text-white mb-2",children:"Twitch Name"}),(0,r.jsx)("input",{type:"text",id:"twitchName",className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"dein_twitch_name",value:e.twitchName,onChange:t=>s({...e,twitchName:t.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"instagramName",className:"block text-white mb-2",children:"Instagram Name"}),(0,r.jsx)("input",{type:"text",id:"instagramName",className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"dein_instagram_name",value:e.instagramName,onChange:t=>s({...e,instagramName:t.target.value})})]})]}),t&&(0,r.jsx)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3 text-red-200",children:t}),(0,r.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Weiter zu den Regeln"})]}),(0,r.jsx)("div",{className:"text-center mt-6",children:(0,r.jsxs)("p",{className:"text-white/80",children:["Bereits einen Account?"," ",(0,r.jsx)(n.default,{href:"/login",className:"text-purple-300 hover:text-purple-200 font-semibold",children:"Hier anmelden"})]})})]}),m&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-8 max-w-6xl max-h-[90vh] overflow-y-auto border border-white/20",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-4xl font-bold text-white mb-4",children:"\uD83C\uDFC6 Tournament Regeln"}),(0,r.jsx)("p",{className:"text-xl text-white/80",children:"JOEDOM'S PATH OF LOKI - Marvel Rivals Tournament"}),(0,r.jsx)("div",{className:"mt-4 inline-block bg-purple-600/30 border border-purple-400 rounded-lg px-6 py-2",children:(0,r.jsx)("span",{className:"text-purple-200 font-medium",children:"\uD83D\uDCC5 Double Elimination • 8 Teams • Marvel Rivals"})})]}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"bg-gradient-to-r from-red-500/20 to-orange-500/20 backdrop-blur-sm rounded-xl p-6 border border-red-500/30",children:[(0,r.jsxs)("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[(0,r.jsx)("span",{className:"text-red-400 mr-3 text-3xl",children:"⚠️"}),"Teilnahme-Voraussetzungen"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"bg-white/10 rounded-lg p-4 border border-purple-500/30 text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCFA"}),(0,r.jsx)("h4",{className:"text-white font-semibold text-sm mb-1",children:"Twitch Follow"}),(0,r.jsx)("p",{className:"text-white/80 text-xs",children:"JoeDom folgen"})]}),(0,r.jsxs)("div",{className:"bg-white/10 rounded-lg p-4 border border-blue-500/30 text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCAC"}),(0,r.jsx)("h4",{className:"text-white font-semibold text-sm mb-1",children:"Discord Join"}),(0,r.jsx)("p",{className:"text-white/80 text-xs",children:"JoeDom's Discord"})]}),(0,r.jsxs)("div",{className:"bg-white/10 rounded-lg p-4 border border-pink-500/30 text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCF8"}),(0,r.jsx)("h4",{className:"text-white font-semibold text-sm mb-1",children:"Instagram Follow"}),(0,r.jsx)("p",{className:"text-white/80 text-xs",children:"OXS folgen"})]}),(0,r.jsxs)("div",{className:"bg-white/10 rounded-lg p-4 border border-green-500/30 text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83C\uDFE6"}),(0,r.jsx)("h4",{className:"text-white font-semibold text-sm mb-1",children:"Bankkonto"}),(0,r.jsx)("p",{className:"text-white/80 text-xs",children:"IBAN f\xfcr Gewinn"})]}),(0,r.jsxs)("div",{className:"bg-white/10 rounded-lg p-4 border border-red-500/30 text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDD34"}),(0,r.jsx)("h4",{className:"text-white font-semibold text-sm mb-1",children:"Live Stream"}),(0,r.jsx)("p",{className:"text-white/80 text-xs",children:"Anwesenheit Pflicht"})]})]}),(0,r.jsx)("div",{className:"bg-yellow-500/20 rounded-lg p-3 border border-yellow-500/30",children:(0,r.jsxs)("p",{className:"text-yellow-200 font-medium text-center text-sm",children:[(0,r.jsx)("span",{className:"text-yellow-400 text-lg mr-2",children:"⚡"}),"Diese Voraussetzungen werden bei der Verifikation \xfcberpr\xfcft!"]})})]})}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,r.jsx)("span",{className:"mr-3 text-2xl",children:"\uD83D\uDCCB"}),"1. Allgemeine Regeln"]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-green-400 mr-2 text-lg mt-1",children:"✓"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"Alle Teilnehmer m\xfcssen fair play befolgen und respektvoll miteinander umgehen"})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-red-400 mr-2 text-lg mt-1",children:"✗"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"Beleidigungen oder toxisches Verhalten f\xfchren zur sofortigen Disqualifikation"})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-blue-400 mr-2 text-lg mt-1",children:"\uD83D\uDC65"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"Teams bestehen aus maximal 6 Spielern pro Team"})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-purple-400 mr-2 text-lg mt-1",children:"\uD83D\uDD12"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"Jeder Spieler kann nur in einem Team teilnehmen"})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-orange-400 mr-2 text-lg mt-1",children:"\uD83D\uDCCA"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:(0,r.jsx)("strong",{children:"Die In-Game Karriere in Marvel Rivals muss \xf6ffentlich sichtbar sein"})})]})]})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,r.jsx)("span",{className:"mr-3 text-2xl",children:"\uD83C\uDFC6"}),"2. Tournament Format"]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"bg-yellow-500/20 rounded-lg p-2 border border-yellow-500/30",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-yellow-400 mr-2 text-lg mt-1",children:"⚡"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:(0,r.jsx)("strong",{children:"Jeder Tier 1 Spieler muss Loki spielen"})})]})}),(0,r.jsx)("div",{className:"bg-red-500/20 rounded-lg p-2 border border-red-500/30",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-red-400 mr-2 text-lg mt-1",children:"\uD83D\uDEAB"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:(0,r.jsx)("strong",{children:"Loki darf nicht gebannt werden"})})]})}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-green-400 mr-2 text-lg mt-1",children:"\uD83D\uDD04"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"Double Elimination System mit 8 Teams"})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-blue-400 mr-2 text-lg mt-1",children:"\uD83C\uDFC5"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"Winner Bracket und Loser Bracket"})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-purple-400 mr-2 text-lg mt-1",children:"⚔️"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"Best of 3 in allen Runden au\xdfer dem Finale"})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-pink-400 mr-2 text-lg mt-1",children:"\uD83D\uDC51"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"Finale ist Best of 5 f\xfcr den ultimativen Champion"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,r.jsx)("span",{className:"mr-3 text-2xl",children:"\uD83C\uDFAF"}),"3. Tier System"]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"bg-yellow-500/20 rounded-lg p-2 border border-yellow-500/30",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-yellow-400 mr-2 text-lg",children:"\uD83E\uDD47"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-white font-semibold text-sm",children:"Tier 1:"}),(0,r.jsx)("span",{className:"text-white/90 ml-1 text-sm",children:"H\xf6chste Skill-Kategorie"})]})]})}),(0,r.jsx)("div",{className:"bg-orange-500/20 rounded-lg p-2 border border-orange-500/30",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-orange-400 mr-2 text-lg",children:"\uD83E\uDD48"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-white font-semibold text-sm",children:"Tier 2:"}),(0,r.jsx)("span",{className:"text-white/90 ml-1 text-sm",children:"Mittlere Skill-Kategorie"})]})]})}),(0,r.jsx)("div",{className:"bg-gray-500/20 rounded-lg p-2 border border-gray-500/30",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-gray-400 mr-2 text-lg",children:"\uD83E\uDD49"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-white font-semibold text-sm",children:"Tier 3:"}),(0,r.jsx)("span",{className:"text-white/90 ml-1 text-sm",children:"Niedrigste Skill-Kategorie"})]})]})}),(0,r.jsx)("div",{className:"bg-purple-500/20 rounded-lg p-2 border border-purple-500/30",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-purple-400 mr-2 text-lg",children:"⚖️"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"Teams werden fair \xfcber alle Tiers verteilt"})]})})]})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,r.jsx)("span",{className:"mr-3 text-2xl",children:"\uD83D\uDD0D"}),"4. Verifikation & Teilnahme"]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"bg-blue-500/20 rounded-lg p-2 border border-blue-500/30",children:(0,r.jsxs)("div",{className:"text-white/90 text-sm",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Zu verifizieren:"})," In-Game Name, Rank, Discord, Twitch und Instagram"]})}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-green-400 mr-2 text-lg mt-1",children:"✅"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"Nur verifizierte Spieler k\xf6nnen Teams zugelost werden"})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-red-400 mr-2 text-lg mt-1",children:"❌"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"Falsche Angaben f\xfchren zur Disqualifikation"})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-yellow-400 mr-2 text-lg mt-1",children:"\uD83D\uDD50"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"P\xfcnktliches Erscheinen zu den Matches ist Pflicht"})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-orange-400 mr-2 text-lg mt-1",children:"⚠️"}),(0,r.jsx)("span",{className:"text-white/90 text-sm",children:"Bei Versp\xe4tung von mehr als 5 Minuten droht Disqualifikation"})]})]})]})]}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30 rounded-xl p-6 mb-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl mb-3",children:"\uD83D\uDCDD"}),(0,r.jsx)("p",{className:"text-yellow-200 font-semibold text-lg mb-2",children:"Regelakzeptierung"}),(0,r.jsx)("p",{className:"text-yellow-300 text-sm",children:"Mit der Registrierung akzeptierst du automatisch alle Tournament Regeln. Verst\xf6\xdfe k\xf6nnen zur Disqualifikation f\xfchren."})]})}),(0,r.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,r.jsx)("button",{onClick:()=>x(!1),className:"px-8 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-semibold transition-all hover:scale-105",children:"← Zur\xfcck"}),(0,r.jsx)("button",{onClick:g,disabled:c,className:"px-10 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-semibold hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 flex items-center",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Wird erstellt..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"mr-2",children:"\uD83D\uDE80"}),"Registrierung abschlie\xdfen"]})})]})]})})]})}},4362:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return n},a:function(){return i}});var r=t(7437),l=t(2265);let a=(0,l.createContext)(void 0),i=()=>{let e=(0,l.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},n=e=>{let{children:s}=e,[t,i]=(0,l.useState)(null),[n,d]=(0,l.useState)(null),[c,o]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!0),h=async()=>{let e=localStorage.getItem("token");if(!e){i(null),d(null),o(!1),x(!1);return}d(e);try{let s=await fetch("/api/user/profile",{headers:{Authorization:"Bearer ".concat(e)},credentials:"include"});if(s.ok){let e=await s.json();e.success&&e.user?(i(e.user),o(!0)):(localStorage.removeItem("token"),i(null),d(null),o(!1))}else localStorage.removeItem("token"),i(null),d(null),o(!1)}catch(e){console.error("Auth refresh error:",e),localStorage.removeItem("token"),i(null),d(null),o(!1)}finally{x(!1)}},u=async()=>{localStorage.removeItem("token"),d(null),i(null),o(!1);try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout API error:",e)}window.dispatchEvent(new Event("authChange"))};return(0,l.useEffect)(()=>{h();let e=()=>{h()};return window.addEventListener("authChange",e),window.addEventListener("storage",e),()=>{window.removeEventListener("authChange",e),window.removeEventListener("storage",e)}},[]),(0,r.jsx)(a.Provider,{value:{user:t,token:n,isLoggedIn:c,loading:m,login:(e,s)=>{localStorage.setItem("token",e),d(e),i(s),o(!0),window.dispatchEvent(new Event("authChange"))},logout:u,refreshUser:h},children:s})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=6544)}),_N_E=e.O()}]);